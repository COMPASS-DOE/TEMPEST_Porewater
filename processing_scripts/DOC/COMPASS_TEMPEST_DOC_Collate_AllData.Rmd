---
title: "TEMPEST: Porewater/Sourcewater DOC"
author: "2022-2025 Samples"
date: "`r Sys.Date()`"
output: 
  pdf_document:
    toc: true
    number_sections: true

output_dir: "To Be Reviewed/PDF"
---

```{r setup, include=FALSE}
library(dplyr)
library(ggplot2)
library(ggpubr)
library(stringr)
library(readxl)
library(tidyr)
library(tibble)
library(openxlsx)
library(knitr)
```

##Grab 2023 and 2024 and 2025 All Data Files
```{r Pull in 2022-2024 data files, message=FALSE, include=FALSE}

#read in 2023 DOC Data:
dat22 <- read.csv("tmp_doc_2022/COMPASS_TEMPEST_DOC_2022.csv", colClasses = "character")
# head(dat24)
colnames(dat22)

#read in 2023 DOC Data:
dat23 <- read.csv("tmp_doc_2023/COMPASS_TEMPEST_DOC_2023.csv", colClasses = "character")
# head(dat24)
colnames(dat23)

#read in 2024 DOC Data:
dat24 <- read.csv("tmp_doc_2024/COMPASS_TEMPEST_DOC_2024.csv", colClasses = "character")
# head(dat24)
colnames(dat24)

#read in 2025 DOC Data:
dat25 <- read.csv("tmp_doc_2025/COMPASS_TEMPEST_DOC_2025.csv", colClasses = "character")
# head(dat25)
colnames(dat25)

raw_dat <- bind_rows(dat22, dat23, dat24, dat25)

##Sourcewater samples should be NA for depth, all other samples 15 cm. 
raw_dat <- raw_dat %>% 
  mutate(Depth_cm = ifelse(str_detect(Sample_ID, "SOURCE"), NA, 15))

##Convert Collection Date into Date format
raw_dat$Collection_Date <- as.character(raw_dat$Collection_Date)
raw_dat$Collection_Date_formatted <- as.Date(raw_dat$Collection_Date, format = "%Y%m%d")

##Extract Year and month from Collection Date
raw_dat$Year <- format(raw_dat$Collection_Date_formatted, format = "%Y")
raw_dat$Month <- format(raw_dat$Collection_Date_formatted, format = "%m")
raw_dat$Day <- format(raw_dat$Collection_Date_formatted, format = "%d")

##Uppercase sample IDs
raw_dat$Sample_ID <- toupper(raw_dat$Sample_ID)

all_dat <- raw_dat %>%
  rename(
    Plot = plot, 
    Grid = grid
  ) %>%
  dplyr::select(
    Project, Site, Plot, Grid, Depth_cm, Sample_ID, 
    npoc_mgL, npoc_uM, npoc_flag, tdn_mgL, tdn_uM, tdn_flag, Analysis_runtime,
    Run_notes, Field_notes, Evacuation_date_YYYMMDD, Collection_Date_YYYYMMDD, 
    Collection_Start_Time_24hrs, Collection_End_Time_24hrs, EST_EDT, Volume_mL
        # list columns in the order you want them
  )


##Set 4 decimal points max
all_dat$npoc_uM <- as.numeric(all_dat$npoc_uM)
all_dat$tdn_uM <- as.numeric(all_dat$tdn_uM)

all_dat <- all_dat %>%
  mutate(npoc_uM = round(npoc_uM, 2)) %>%
  mutate(tdn_uM = round(tdn_uM, 2))

```


##Make Relevant Metadata Sheet
```{r make metadata, include = FALSE}

colnames(all_dat)

#pull the column names from the all_dat dataframe and create a new dataframe with them 
metadat <- data.frame(Column_Names = colnames(all_dat))
metadat

metadat$Description <- ""
metadat$Units <- ""
metadat$Instrument_ifapplicable <- ""

#add information about each line: 

metadat$Description <- c("Project name", 
                         "Site where sample collected", 
                         "Plot where sample collected (SW = Saltwater, FW = Freshwater, C = 
                         Control, Estuary)", 
                         "Grid where sample collected (Letter + Number)", 
                         "Depth where sample collected", 
                         "Sample Identifier", 
                         "Non-Purgeable Organic Carbon (NPOC) concentration in mg/L", 
                         "Non-Purgeable Organic Carbon (NPOC) concentration in uM", 
                         "QAQC Flags generated during checks of NPOC standards, blanks, dups, and spks", 
                         "Total Dissolved Nitrogen (TDN) concentration in mg/L", 
                         "Total Dissolved Nitrogen (TDN) concentration in uM",                          
                         "QAQC Flags generated during checks of TDN standards, blanks, dups, and spks", 
                         "The date that samples were run on the Shimadzu TOC", 
                         "Any notes generated during QAQC", 
                         "Any notes generated during sample collection in the field", 
                         "Date lysimeter evacuated", 
                         "Date sample collected", 
                         "Time lysimeter evacuated", 
                         "Time sample collected", 
                         "Time zone of sample collection", 
                         "Volume of sample collected (mL)")

metadat$Units <-       c("NA", 
                         "NA",
                         "NA", 
                         "NA", 
                         "cm",
                         "NA",
                         "mg/L",
                         "uM",
                         "NA", 
                         "mg/L",
                         "uM",
                         "NA", 
                         "NA",
                         "NA", 
                         "NA", 
                         "NA",
                         "NA", 
                         "NA", 
                         "NA",
                         "NA", 
                         "mL")

metadat$Instrument_ifapplicable <-  
  
                       c("NA", 
                         "NA",
                         "NA", 
                         "NA",
                         "cm",
                         "NA", 
                         "Shimadzu TOC",
                         "Shimadzu TOC",
                         "NA", 
                         "Shimadzu TOC",
                         "Shimadzu TOC",
                         "NA", 
                         "NA",
                         "NA", 
                         "NA", 
                         "NA",
                         "NA", 
                         "NA", 
                         "NA",
                         "NA", 
                         "mL")


```

##Write out files
```{r write out combined data and metadata, include=FALSE}

#write out a csv of all the data to the main folder: 
write.csv(all_dat, "COMPASS_TEMPEST_DOC_AllData.csv")


#write out a csv of the metadata associated with the data: 
write.csv(metadat, "COMPASS_TEMPEST_DOC_Metadata.csv")

```

## Visualize Porewater Data by Grid   
```{r Visualize Data, echo=FALSE, warning=FALSE, message = FALSE, fig.width=16, fig.height=10, dpi = 300}

##Remove Sourcewater
data_plotting <- raw_dat %>%
  filter(!str_detect(grid, "Source"))

data_plotting$npoc_mgL <- as.numeric(data_plotting$npoc_mgL)
data_plotting$tdn_mgL <- as.numeric(data_plotting$tdn_mgL)

data_plotting <- data_plotting %>% 
    mutate(
    plot_1 = case_when(
      plot == "C" ~ "Control",
      plot == "FW" ~ "Freshwater",
      plot == "SW" ~ "Saltwater",
      TRUE ~ plot  # keep everything else unchanged
    )
  ) %>%
  mutate(plot_1 = factor(plot_1, levels = c("Control", "Freshwater", "Saltwater")))

#Plot data by year and change colors based on Grid:
viz_npoc_plot <- ggplot(data_plotting, aes(x = as.character(Year), y = npoc_mgL, fill = plot_1)) +
  geom_bar(stat = "identity", position = position_dodge2(preserve = "total")) +
  facet_wrap( ~ plot_1, scales="free") +
  scale_fill_manual(values = c(
    "Control" = "springgreen2",
    "Freshwater" = "cyan2",
    "Saltwater" = "violetred2"
  )) +
  theme_classic() +
  labs(x = " ", y = "NPOC (mg/L)", title = "TEMPEST Porewater: NPOC") +
  theme(
    panel.spacing = unit(.05, "lines"), 
    panel.border = element_rect(color = "black", fill = NA, linewidth = 1)) + 
  theme(text = element_text(size = 20))+ 
  theme(legend.position = "none")


# viz_npoc_plot

viz_tdn_plot <- ggplot(data_plotting, aes(x = as.character(Year), y = tdn_mgL, fill = plot_1)) +
  geom_bar(stat = "identity", position = position_dodge2(preserve = "total")) +
  facet_wrap( ~ plot_1, scales="free") +
  scale_fill_manual(values = c(
    "Control" = "springgreen2",
    "Freshwater" = "cyan2",
    "Saltwater" = "violetred2"
  )) +
  theme_classic() +
  labs(x = " ", y = "TDN (mg/L)", title = "TEMPEST Porewater: TDN") +
  theme(
    panel.spacing = unit(.05, "lines"), 
    panel.border = element_rect(color = "black", fill = NA, linewidth = 1)) + 
  theme(text = element_text(size = 20))+ 
  theme(legend.position = "none")

# viz_tdn_plot

ggarrange(viz_npoc_plot, viz_tdn_plot, nrow=2, ncol=1)


```

## Summarized Porewater data for Site and Grid 
```{r Summarize and Visualize Data, echo=FALSE, warning=FALSE, message = FALSE, fig.width=16, fig.height=10, dpi = 300}

##Summarize DOC by Date and Grid
DOC_avg <- data_plotting %>%
  group_by(Collection_Date_formatted, plot_1) %>%
   dplyr::summarize(mean_npoc = mean(npoc_mgL, na.rm=TRUE),
            sd_npoc = sd(npoc_mgL, na.rm=TRUE),
            mean_tdn = mean(tdn_mgL, na.rm=TRUE),
            sd_tdn = sd(tdn_mgL, na.rm=TRUE))

# Define the specific date breaks you want to display
specific_breaks <- as.Date(c("2022-01-01","2023-01-01","2024-01-01", "2025-01-01"))

viz_npoc_plot_avgs <- ggplot(DOC_avg, aes(x = Collection_Date_formatted, y = mean_npoc, color = plot_1)) +
  geom_point(size = 3) + 
  geom_errorbar(aes(ymin = mean_npoc - sd_npoc, ymax = mean_npoc + sd_npoc), width = 0.2) + 
  geom_line() + 
  facet_wrap( ~ plot_1, scales="free_y", ncol = 1) +
  scale_color_manual(values = c(
    "Control" = "springgreen2",
    "Freshwater" = "cyan2",
    "Saltwater" = "violetred2"
  )) +
  theme_classic() +
  labs(x = "Date", y = "NPOC (mg/L)", title = "TEMPEST Porewater: NPOC") +
  theme(
    panel.spacing = unit(0.5, "lines"), 
    panel.border = element_rect(color = "black", fill = NA, linewidth = 1)) +
  theme(text = element_text(size = 30))+
  scale_x_date(date_labels = "%b %Y", date_breaks = "1 month") + # Format x-axis labels
  theme(axis.ticks.x = element_line(linewidth = 1))+
  theme(axis.ticks.length.x = unit(0.25, "cm"))+ 
  theme(legend.position = "none")+ 
  theme(axis.text.x = element_text(angle = 45, hjust = 1, size = 20))

viz_npoc_plot_avgs


viz_tdn_plot_avgs <- ggplot(DOC_avg, aes(x = Collection_Date_formatted, y = mean_tdn, color = plot_1)) +
  geom_point(size = 3) + 
  geom_errorbar(aes(ymin = mean_tdn - sd_tdn, ymax = mean_tdn + sd_tdn), width = 0.2) + 
  geom_line() + 
  facet_wrap( ~ plot_1, scales="free_y", ncol = 1) +
  scale_color_manual(values = c(
    "Control" = "springgreen2",
    "Freshwater" = "cyan2",
    "Saltwater" = "violetred2"
  )) +
  theme_classic() +
  labs(x = "Date", y = "TDN (mg/L)", title = "TEMPEST Porewater: TDN") +
  theme(
    panel.spacing = unit(0.5, "lines"), 
    panel.border = element_rect(color = "black", fill = NA, linewidth = 1)) +
  theme(text = element_text(size = 30))+
  scale_x_date(date_labels = "%b %Y", date_breaks = "1 month") + # Format x-axis labels
  theme(axis.ticks.x = element_line(linewidth = 1))+
  theme(axis.ticks.length.x = unit(0.25, "cm"))+ 
  theme(legend.position = "none")+ 
  theme(axis.text.x = element_text(angle = 45, hjust = 1, size = 20))

viz_tdn_plot_avgs

# ggarrange(viz_cl_plot_avgs, viz_tdn_plot_avgs, nrow=1, ncol=2)

```

## Boxplot summary for Porewater
```{r Porewater Overall Boxplot, echo=FALSE, warning=FALSE, message = FALSE, fig.width=16, fig.height=10, dpi = 300}

##Boxplot Summarize DOC by Date, Site, and Grid
viz_npoc_boxplot <- ggplot(data_plotting, aes(x = Collection_Date,  y = npoc_mgL, fill = plot_1)) +
  geom_boxplot() + 
  facet_wrap( ~ plot_1, scales="free_y", ncol = 1) +
  # scale_x_discrete(drop = TRUE) +
  scale_fill_manual(values = c(
    "Control" = "springgreen2",
    "Freshwater" = "cyan2",
    "Saltwater" = "violetred2"
  ), labels = c("Control", "Freshwater", "Saltwater")) +
  theme_classic() +
  labs(x = " ", y = "NPOC (mg/L)", title = "TEMPEST Porewater: NPOC") +
  theme(
    panel.spacing = unit(0.5, "lines"), 
    panel.border = element_rect(color = "black", fill = NA, linewidth = 1)) +
  theme(axis.text.x = element_text(angle = 45, vjust = 1, hjust = 1, size = 20))+ 
  theme(text = element_text(size = 30))+
  theme(axis.ticks.x = element_line(linewidth = 1))+
  theme(axis.ticks.length.x = unit(0.25, "cm"))+ 
  theme(legend.position = "none")

viz_npoc_boxplot


viz_tdn_boxplot <- ggplot(data_plotting, aes(x = Collection_Date,  y = tdn_mgL, fill = plot_1)) +
  geom_boxplot() + 
  facet_wrap( ~ plot_1, scales="free_y", ncol = 1) +
  scale_x_discrete(drop = TRUE) +
  scale_fill_manual(values = c(
    "Control" = "springgreen2",
    "Freshwater" = "cyan2",
    "Saltwater" = "violetred2"
  ), labels = c("Control", "Freshwater", "Saltwater")) +
  theme_classic() +
  labs(x = " ", y = "TDN (mg/L)", title = "TEMPEST Porewater: TDN") +
  theme(
    panel.spacing = unit(0.5, "lines"), 
    panel.border = element_rect(color = "black", fill = NA, linewidth = 1)) +
  theme(axis.text.x = element_text(angle = 45, vjust = 1, hjust = 1, size = 20))+ 
  theme(text = element_text(size = 30))+
  theme(axis.ticks.x = element_line(linewidth = 1))+
  theme(axis.ticks.length.x = unit(0.25, "cm"))+ 
  theme(legend.position = "none")

viz_tdn_boxplot

# ggarrange(viz_cl_boxplot, viz_so4_boxplot, nrow=1, ncol=2)

# # Save as a PNG
# png("COMPASS_SynopticCB_Cl_alldata.png", width = 2000, height = 1200, res = 100) 
# print(viz_cl_boxplot)  # For ggplot objects, use print()
# dev.off() 
# 
# # Save as a PNG
# png("COMPASS_SynopticCB_SO4_alldata.png", width = 2000, height = 1200, res = 100) 
# print(viz_so4_boxplot)  # For ggplot objects, use print()
# dev.off() 

```

## Boxplot summary for Sourcewater
```{r Sourcewater Overall Boxplot, echo=FALSE, warning=FALSE, message = FALSE, fig.width=16, fig.height=10, dpi = 300}

##Only Sourcewater
data_plotting_source <- raw_dat %>%
  filter(str_detect(grid, "Source"))

data_plotting_source$npoc_mgL <- as.numeric(data_plotting_source$npoc_mgL)
data_plotting_source$tdn_mgL <- as.numeric(data_plotting_source$tdn_mgL)

data_plotting_source <- data_plotting_source %>% 
    mutate(
    plot_1 = case_when(
      plot == "C" ~ "Control",
      plot == "FW" ~ "Freshwater",
      plot == "SW" ~ "Saltwater",
      plot == "ESTUARY" ~ "Estuary",
      TRUE ~ plot  # keep everything else unchanged
    )
  ) %>%
  mutate(plot_1 = factor(plot_1, levels = c("Control", "Freshwater", "Saltwater", "Estuary")))

##Boxplot Summarize DOC by Date, Site, and Grid
viz_npoc_boxplot <- ggplot(data_plotting_source, aes(x = Collection_Date,  y = npoc_mgL, fill = plot_1)) +
  geom_boxplot() + 
  facet_wrap( ~ plot_1, scales="free_y", ncol = 1) +
  # scale_x_discrete(drop = TRUE) +
  scale_fill_manual(values = c(
    "Control" = "springgreen2",
    "Freshwater" = "cyan2",
    "Saltwater" = "violetred2", 
    "Estuary" = "darkred"
  ), labels = c("Control", "Freshwater", "Saltwater", "Estuary")) +
  theme_classic() +
  labs(x = " ", y = "NPOC (mg/L)", title = "TEMPEST Sourcewater: NPOC") +
  theme(
    panel.spacing = unit(0.5, "lines"), 
    panel.border = element_rect(color = "black", fill = NA, linewidth = 1)) +
  theme(axis.text.x = element_text(angle = 45, vjust = 1, hjust = 1))+ 
  theme(text = element_text(size = 30))+
  theme(axis.ticks.x = element_line(linewidth = 1))+
  theme(axis.ticks.length.x = unit(0.25, "cm"))+ 
  theme(legend.position = "none")

viz_npoc_boxplot


viz_tdn_boxplot <- ggplot(data_plotting_source, aes(x = Collection_Date,  y = tdn_mgL, fill = plot_1)) +
  geom_boxplot() + 
  facet_wrap( ~ plot_1, scales="free_y", ncol = 1) +
  scale_x_discrete(drop = TRUE) +
  scale_fill_manual(values = c(
    "Control" = "springgreen2",
    "Freshwater" = "cyan2",
    "Saltwater" = "violetred2", 
    "Estuary" = "darkred"
  ), labels = c("Control", "Freshwater", "Saltwater", "Estuary")) +
  theme_classic() +
  labs(x = " ", y = "TDN (mg/L)", title = "TEMPEST Sourcewater: TDN") +
  theme(
    panel.spacing = unit(0.5, "lines"), 
    panel.border = element_rect(color = "black", fill = NA, linewidth = 1)) +
  theme(axis.text.x = element_text(angle = 45, vjust = 1, hjust = 1))+ 
  theme(text = element_text(size = 30))+
  theme(axis.ticks.x = element_line(linewidth = 1))+
  theme(axis.ticks.length.x = unit(0.25, "cm"))+ 
  #scale_x_discrete(labels = c("Upland", "Swamp", "Transition", "Wetland", "Surface Water"))+ 
  theme(legend.position = "none")

viz_tdn_boxplot

# ggarrange(viz_cl_boxplot, viz_so4_boxplot, nrow=1, ncol=2)

# # Save as a PNG
# png("COMPASS_SynopticCB_Cl_alldata.png", width = 2000, height = 1200, res = 100) 
# print(viz_cl_boxplot)  # For ggplot objects, use print()
# dev.off() 
# 
# # Save as a PNG
# png("COMPASS_SynopticCB_SO4_alldata.png", width = 2000, height = 1200, res = 100) 
# print(viz_so4_boxplot)  # For ggplot objects, use print()
# dev.off() 

```

##Calculate summary metrics for Porewater
```{r Porewater additional summary metrics, include=FALSE, dpi = 300}
# It would also be great to add to our collation codes a summary chunk that will calculate value ranges, means, and standard deviations (and errors) for each site, Grid, depth for each year; also for each site Grid, depth overall; and for each site and Grid overall so that we have some easy access to metrics. Was just thinking this might be helpful today when re-collating the DIC data.

colnames(data_plotting)

##Metrics for each Grid for each year
summary_by_year <- data_plotting %>%
  group_by(Year, plot_1) %>%
   reframe(
     min_npoc_mgL = min(npoc_mgL, na.rm=TRUE),
     max_npoc_mgL = max(npoc_mgL, na.rm=TRUE), 
     mean_npoc_mgL = mean(npoc_mgL, na.rm=TRUE), 
     sd_npoc_mgL = sd(npoc_mgL, na.rm=TRUE), 

     min_tdn_mgL = min(tdn_mgL, na.rm=TRUE),
     max_tdn_mgL = max(tdn_mgL, na.rm=TRUE), 
     mean_tdn_mgL = mean(tdn_mgL, na.rm=TRUE), 
     sd_tdn_mgL = sd(tdn_mgL, na.rm=TRUE)) %>%
  mutate(across(where(is.numeric), round, digits = 4)) 

##Metrics for each Grid for all years
summary_all_years <- data_plotting %>%
  group_by(plot_1) %>%
   reframe(
     min_npoc_mgL = min(npoc_mgL, na.rm=TRUE),
     max_npoc_mgL = max(npoc_mgL, na.rm=TRUE), 
     mean_npoc_mgL = mean(npoc_mgL, na.rm=TRUE), 
     sd_npoc_mgL = sd(npoc_mgL, na.rm=TRUE), 

     min_tdn_mgL = min(tdn_mgL, na.rm=TRUE),
     max_tdn_mgL = max(tdn_mgL, na.rm=TRUE), 
     mean_tdn_mgL = mean(tdn_mgL, na.rm=TRUE), 
     sd_tdn_mgL = sd(tdn_mgL, na.rm=TRUE)) %>%
  mutate(across(where(is.numeric), round, digits = 4)) 

```

##Calculate summary metrics for Sourcewater
```{r Sourcewater additional summary metrics, include=FALSE, dpi = 300}
# It would also be great to add to our collation codes a summary chunk that will calculate value ranges, means, and standard deviations (and errors) for each site, Grid, depth for each year; also for each site Grid, depth overall; and for each site and Grid overall so that we have some easy access to metrics. Was just thinking this might be helpful today when re-collating the DIC data.

colnames(data_plotting_source)

##Metrics for each Grid for each year
summary_by_year_source <- data_plotting_source %>%
  group_by(Year, plot_1) %>%
   reframe(
     min_npoc_mgL = min(npoc_mgL, na.rm=TRUE),
     max_npoc_mgL = max(npoc_mgL, na.rm=TRUE), 
     mean_npoc_mgL = mean(npoc_mgL, na.rm=TRUE), 
     sd_npoc_mgL = sd(npoc_mgL, na.rm=TRUE), 

     min_tdn_mgL = min(tdn_mgL, na.rm=TRUE),
     max_tdn_mgL = max(tdn_mgL, na.rm=TRUE), 
     mean_tdn_mgL = mean(tdn_mgL, na.rm=TRUE), 
     sd_tdn_mgL = sd(tdn_mgL, na.rm=TRUE)) %>%
  mutate(across(where(is.numeric), round, digits = 4)) 

```

## Summary Tables for Porewater
```{r Porewater summary table metrics, echo = FALSE, message = FALSE, dpi = 100}

library(kableExtra)

kable(
  summary_by_year[, c("Year", "plot_1", "min_npoc_mgL",	"max_npoc_mgL",	"mean_npoc_mgL", "min_tdn_mgL",	"max_tdn_mgL",	"mean_tdn_mgL")],  
  format = "latex",
  booktabs = TRUE,
  caption = "Porewater Summary Statistics by Year"
) %>%
  kable_styling(
    latex_options = c("hold_position", "striped", "scale_down"),
    font_size = 12
  ) %>%
  row_spec(0, bold = TRUE) %>%   # header
  column_spec(1, bold = TRUE)

kable(
  summary_all_years[, c("plot_1", "min_npoc_mgL",	"max_npoc_mgL",	"mean_npoc_mgL", "min_tdn_mgL",	"max_tdn_mgL",	"mean_tdn_mgL")],  
  format = "latex",
  booktabs = TRUE,
  caption = "Porewater Summary Statistics by Grid"
) %>%
  kable_styling(
    latex_options = c("hold_position", "striped", "scale_down"),
    font_size = 12
  ) %>%
  row_spec(0, bold = TRUE) %>%   # header
  column_spec(1, bold = TRUE)

```


## Summary Tables for Sourcewater
```{r Sourcewater summary table metrics, echo = FALSE, message = FALSE, dpi = 100}

library(kableExtra)

kable(
  summary_by_year_source[, c("Year", "plot_1", "min_npoc_mgL",	"max_npoc_mgL",	"mean_npoc_mgL", "min_tdn_mgL",	"max_tdn_mgL",	"mean_tdn_mgL")],  
  format = "latex",
  booktabs = TRUE,
  caption = "Sourcewater Summary Statistics by Year"
) %>%
  kable_styling(
    latex_options = c("hold_position", "striped", "scale_down"),
    font_size = 12
  ) %>%
  row_spec(0, bold = TRUE) %>%   # header
  column_spec(1, bold = TRUE)

```

##Write out summarized data
```{r write out summarized data, include=FALSE}

#write out a csv of the Porewater Summary Statistics by Year to the main folder: 
write.csv(summary_by_year, "COMPASS_TEMPEST_PW_DOC_Summarized_By_Year.csv")

#write out a csv of the Porewater Summary Statistics by Grid to the main folder: 
write.csv(summary_all_years, "COMPASS_TEMPEST_PW_DOC_Summarized_Years_Combined.csv")

#write out a csv of the Sourcewater Summary Statistics by Year to the main folder: 
write.csv(summary_by_year_source, "COMPASS_TEMPEST_SOURCE_DOC_Summarized_By_Year.csv")

```



